{"version":3,"sources":["webpack:///./src/views/Songitem.vue?cef0","webpack:///src/views/Songitem.vue","webpack:///./src/views/Songitem.vue?64d2","webpack:///./src/views/Songitem.vue","webpack:///./node_modules/_core-js@3.11.3@core-js/modules/es.array.concat.js","webpack:///./src/views/Songitem.vue?aa2a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","pic","_v","_s","details","name","description","_l","item","index","key","id","on","$event","$emit","scopedSlots","_u","fn","proxy","staticStyle","_e","staticRenderFns","props","components","mounted","window","addEventListener","beforeRountLeave","removeEventListener","next","methods","debounce","timeout","setTimeout","wait","handleScroll","data","show","songs","dangsongs","i","isLoading","page","perpage","component","$","fails","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","k","length","len","E","A","n","arguments","TypeError"],"mappings":"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","file":"js/chunk-6c68b617.6e6c02e1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"songitem\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":_vm.pic,\"alt\":\"\"}}),_c('img',{staticClass:\"imgbg\",attrs:{\"src\":_vm.pic,\"alt\":\"\"}}),_c('div',{staticClass:\"details\"},[_c('h3',[_vm._v(_vm._s(_vm.details.name))]),_c('p',[_vm._v(_vm._s(_vm.details.description))])])]),_c('ul',{staticClass:\"kong\"},[_c('img',{attrs:{\"src\":require(\"../assets/all.png\"),\"alt\":\"\"}}),_vm._l((_vm.dangsongs),function(item,index){return _c('li-item',{key:item.id,attrs:{\"item\":item},on:{\"play\":function($event){return _vm.$emit('play',$event)}},scopedSlots:_vm._u([{key:\"sortnum\",fn:function(){return [_c('b',[_vm._v(_vm._s(((index+1) < 10) ? '0'+(index+1):index+1))])]},proxy:true}],null,true)})}),(_vm.isLoading)?_c('loading',{staticStyle:{\"margin-top\":\"10px\"}}):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"songitem\">\r\n      \r\n    <div class=\"top\">\r\n      <img :src=\"pic\" alt=\"\" />\r\n      <img :src=\"pic\" alt=\"\" class=\"imgbg\"/>\r\n      <div class=\"details\">\r\n        <h3>{{details.name}}</h3>\r\n        <p>{{details.description}}</p>\r\n       \r\n      </div>\r\n    </div>\r\n    <ul class=\"kong\">\r\n      <img src=\"../assets/all.png\" alt=\"\">\r\n\r\n    <li-item v-for=\"(item,index) in dangsongs\" :key=\"item.id\" @play=\"$emit('play',$event)\" :item=\"item\">\r\n      <template v-slot:sortnum>\r\n            <b>{{((index+1) &lt; 10) ? '0'+(index+1):index+1}}</b>\r\n        </template>\r\n    </li-item>\r\n    <loading v-if=\"isLoading\" style=\"margin-top:10px\"></loading>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport LiItem from '@/components/LiItem.vue'\r\nimport Loading from '@/components/Loading.vue'\r\nexport default {\r\n  props:['id'],\r\n  components: {\r\n      LiItem,Loading\r\n  },\r\n  mounted(){\r\n    window.addEventListener('scroll',this.debounce(this.handleScroll,1000))\r\n  },\r\n  beforeRountLeave(to,from,next){\r\n    window.removeEventListener('scroll',this.debounce(this.handleScroll,1000));\r\n    next();\r\n  },\r\n  methods:{\r\n    debounce(fn, wait) {\r\n      let timeout = null\r\n      return function() {\r\n        if(timeout !== null) clearTimeout(timeout)     \r\n        timeout = setTimeout(fn, wait);\r\n      }\r\n    },\r\n    handleScroll(){\r\n      // console.log(document.documentElement.scrollTop);\r\n      // console.log(document.documentElement.scrollHeight);\r\n      // console.log(document.documentElement.clientHeight);\r\n      let scrollA = document.documentElement.scrollHeight;\r\n      let scrollC = document.documentElement.scrollTop;\r\n      let scrollB = document.documentElement.clientHeight;\r\n      let whnb = scrollA-(scrollC+scrollB);\r\n      // console.log(whnb);\r\n      if(whnb<3){\r\n        // console.log('nb');\r\n          this.page++; // 1  2\r\n          let start=(this.page)*this.perpage;// 20   40\r\n          let end=(this.page+1)*this.perpage;// 40   60\r\n          let zhang = this.songs.slice(start,end);\r\n          this.dangsongs=this.dangsongs.concat(zhang);\r\n          \r\n        \r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      show:false,\r\n      pic:'',\r\n      songs:[],\r\n      dangsongs:[],\r\n      details:'',\r\n      i:-1,\r\n      isLoading:true,\r\n      page:0,//记录页码\r\n      perpage:20//每页显示20条\r\n    }\r\n  },\r\n  // created() {\r\n  //   this.axios.get('/playlist/detail?id='+this.id).then(d=>{console.log(d);\r\n  //   this.pic=d.data.playlist.coverImgUrl;\r\n  //   this.songs=d.data.playlist.tracks.map((data)=>{\r\n  //     data.song={\r\n  //       artists:[{name:data.ar[0].name}],\r\n  //       album:{name:data.al.name,picUrl:data.al.picUrl},\r\n  //       privilege:{maxbr:[d.data.privileges[this.i+1].maxbr]}\r\n  //     }\r\n  //     return data;\r\n  //   });\r\n  //   this.details=d.data.playlist;\r\n  //   // console.log(this.pic);\r\n  //   // console.log(this.songs);\r\n  //   })\r\n  // },\r\n\r\n    beforeRouteEnter(to,from,next){\r\n      next(vm=>{\r\n          vm.axios.get('/playlist/detail?id='+vm.id).then(d=>{console.log(d);\r\n          vm.pic=d.data.playlist.coverImgUrl;\r\n          vm.songs=d.data.playlist.tracks.map((data,index)=>{\r\n            data.song={\r\n          privilege:d.data.privileges[index],\r\n          artists:data.ar,\r\n          album:data.al\r\n            }\r\n            return data;\r\n          });\r\n          vm.details=d.data.playlist;\r\n\r\n          vm.dangsongs=vm.songs.slice(0,20);\r\n          // console.log(this.pic);\r\n          // console.log(this.songs);\r\n          })\r\n\r\n      })\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.songitem{\r\n  margin-top: 80px;\r\n  position: relative;\r\n  ul{\r\n    list-style: none;\r\n  }\r\n  .top{\r\n    width: 100%;\r\n    display: flex;\r\n    // margin: left 35px;\r\n\r\n    // justify-content: space-between;\r\n    margin-bottom: 10px;\r\n    margin-top: 6px;\r\n      color: white;\r\n\r\n    p{\r\n      font-size: 12px;\r\n      height: 50px;\r\n      color: white;\r\n      margin-top: 10px;\r\n      display: block;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 3;\r\n      -webkit-box-orient: vertical;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n    .details{\r\n      width: 70vh;\r\n      margin-left: 10px;\r\n      overflow: hidden;\r\n      .box{\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        span{\r\n        font-size: 14px;\r\n        padding-right: 6px;\r\n      }\r\n      }\r\n     \r\n    }\r\n   \r\n    img{\r\n      width: 20vh;\r\n      // margin-left: 6px;\r\n      display: block;\r\n      border: none;\r\n      height: 20vh;\r\n      max-width: 100%;\r\n      // float: left;\r\n    }\r\n\r\n  }\r\n}\r\n.imgbg{\r\n  position: absolute !important;\r\n  width: 100vw   !important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  width: 100vw !important;\r\n  height: 20vh !important;\r\n  z-index: -1 !important;\r\n  filter: blur(20px) !important;\r\n} \r\n.kong{\r\n  width: 100vw;\r\n  position: relative;\r\n  margin-bottom: 80px;\r\n  img{\r\n    position: absolute;\r\n    opacity: 0.2;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: -3;\r\n\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Songitem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Songitem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Songitem.vue?vue&type=template&id=62df4466&scoped=true&\"\nimport script from \"./Songitem.vue?vue&type=script&lang=js&\"\nexport * from \"./Songitem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Songitem.vue?vue&type=style&index=0&id=62df4466&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62df4466\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Songitem.vue?vue&type=style&index=0&id=62df4466&lang=less&scoped=true&\""],"sourceRoot":""}